"0","census <- census_list %>%"
"0","  map(~ content(., as = ""text"")) %>%"
"0","  map(~ fromJSON(., simplifyDataFrame = TRUE)) %>%"
"0","  map(~ as.data.frame(.))"
"0","year_list <- rep(c(2010:2017), 3) # Add years to each list"
"0","for (i in 1:length(year_list)) {"
"0","  census[[i]][[""V4""]] <- year_list[i]"
"0","}"
"0","for (i in 1:length(census))  { # Rename list names to make it easier to concatenate"
"0","  names(census[[i]]) <- c(""state"", as.character(census[[i]][1,2]), ""statecode"", ""year"")"
"0","}"
"0","census_clean <- census %>%"
"0","  map_dfr(~ .) %>%"
"0","  filter(state != ""NAME"") %>%"
"0","  select(state, year, rentincome = B25071_001E, gini = B19083_001E, population = B01003_001E) %>%"
"0","  gather(key, value, rentincome:population) %>%"
"0","  filter(!is.na(value))"
"0","rentincome <- census_clean %>%"
"0","  filter(key == ""rentincome"") %>%"
"0","  select(state, year, rentincome = value)"
"0","rentincome$rentincome <- as.numeric(rentincome$rentincome)"
"0","gini <- census_clean %>%"
"0","  filter(key == ""gini"") %>%"
"0","  select(state, year, gini = value)"
"0","gini$gini <- as.numeric(gini$gini)"
"0","population <- census_clean %>%"
"0","  filter(key == ""population"") %>%"
"0","  select(state, year, population = value)"
"0","population$population <- as.numeric(population$population)"
"0","saveRDS(rentincome, ""rentincome.RDS"")"
"0","saveRDS(gini, ""gini.RDS"")"
"0","saveRDS(population, ""population.RDS"")"
